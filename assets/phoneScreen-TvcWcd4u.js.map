{"version":3,"file":"phoneScreen-TvcWcd4u.js","sources":["../../src/PhoneScreen/Contact/Contact.tsx","../../src/PhoneScreen/RealtimeDate/RealtimeDate.tsx","../../src/PhoneScreen/NotificationVolume/NotificationVolume.tsx","../../src/PhoneScreen/PhoneOffButton/PhoneOffButton.tsx","../../src/PhoneScreen/PhoneScreen.tsx"],"sourcesContent":["import { BiLogoGmail } from \"react-icons/bi\";\nimport { FaLinkedin, FaSquareGithub } from \"react-icons/fa6\";\nimport \"./Contact.scss\";\n\nexport default function Contact() {\n  const mailTo = () => {\n    const mail = {\n      email: \"fikriansyah@mrizki.com\",\n      subject: \"I have opportunity for you!\",\n      body: \"Hi Rizki, Do you have a chance to talk about a new opportunity?\",\n    };\n\n    return `mailto:${mail.email}?subject=${mail.subject}&body=${mail.body}`;\n  };\n\n  const linkedinStyle = {\n    color: \"#0077B5\",\n  };\n  const githubStyle = {\n    color: \"#24292E\",\n  };\n  const gmailStyle = {\n    color: \"#D14836\",\n  };\n\n  const iconProps = {\n    size: 80,\n  };\n\n  return (\n    <div className=\"contact\">\n      <div className=\"linked-in\">\n        <a\n          href=\"https://www.linkedin.com/in/rizkifikri/\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          <FaLinkedin {...iconProps} style={linkedinStyle} />\n        </a>\n      </div>\n      <div className=\"github gh-user-klovack\">\n        <a\n          href=\"https://www.github.com/klovack\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          <FaSquareGithub {...iconProps} style={githubStyle} />\n        </a>\n      </div>\n      <div className=\"github gh-user-rizki\">\n        <a\n          href=\"https://www.github.com/rizki-ampero\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          <FaSquareGithub {...iconProps} style={githubStyle} />\n        </a>\n      </div>\n      <div className=\"email\">\n        <a href={mailTo()} target=\"_blank\" rel=\"noreferrer\">\n          <BiLogoGmail {...iconProps} style={gmailStyle} />\n        </a>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { getLang } from \"../../utils/getLang\";\nimport \"./RealtimeDate.scss\";\n\nexport default function RealtimeDate() {\n  const [time, setTime] = React.useState(new Date());\n\n  React.useEffect(() => {\n    // update date every 15 seconds\n    // because we never know when the user will open the page\n    // and we want to make sure the date is always up to date\n    const timer = setInterval(() => {\n      setTime(new Date());\n    }, 15 * 1000);\n    return () => {\n      clearInterval(timer);\n    };\n  });\n  const timeDisplay = Intl.DateTimeFormat(getLang(), {\n    hour: \"numeric\",\n    minute: \"numeric\",\n    hour12: false,\n  }).format(time);\n  const dateDisplay = Intl.DateTimeFormat(getLang(), {\n    year: \"numeric\",\n    month: \"short\",\n    day: \"numeric\",\n  }).format(time);\n\n  return (\n    <div className=\"datetime\">\n      <p className=\"time\">{timeDisplay}</p>\n      <p className=\"date\">{dateDisplay}</p>\n    </div>\n  );\n}\n","import { IoIosVolumeOff, IoIosVolumeHigh } from \"react-icons/io\";\nimport \"./NotificationVolume.scss\";\n\ntype NotificationVolumeProps = {\n  phoneNotificationIds: NodeJS.Timeout[];\n  onVolumeOff: () => void;\n  onVolumeHigh: () => void;\n};\n\nconst NotificationVolume = ({\n  phoneNotificationIds,\n  onVolumeOff: enableVibrating,\n  onVolumeHigh: stopVibrating,\n}: NotificationVolumeProps) => {\n  return (\n    <div\n      className={\n        \"volume-adjustment\" +\n        (phoneNotificationIds.length > 0 ? \" vibrate\" : \"\")\n      }\n    >\n      {phoneNotificationIds.length === 0 ? (\n        <IoIosVolumeOff\n          onClick={enableVibrating}\n          size={100}\n          className=\"volume-off\"\n        />\n      ) : (\n        <IoIosVolumeHigh\n          onClick={stopVibrating}\n          size={100}\n          className=\"volume-on\"\n        />\n      )}\n    </div>\n  );\n};\n\nexport default NotificationVolume;\n","import { debounce } from \"lodash\";\nimport { DetailedHTMLProps, useMemo, useState } from \"react\";\nimport { BiPowerOff } from \"react-icons/bi\";\nimport \"./PhoneOffButton.scss\";\n\ntype PhoneOffButtonProps = Omit<\n  DetailedHTMLProps<\n    React.ButtonHTMLAttributes<HTMLButtonElement>,\n    HTMLButtonElement\n  >,\n  \"onMouseDown\" | \"onMouseUp\"\n> & {\n  onPowerOff: () => void;\n};\n\nconst PhoneOffButton = ({\n  onPowerOff,\n  className,\n  ...props\n}: PhoneOffButtonProps) => {\n  const [isPoweringOff, setIsPoweringOff] = useState(false);\n  const handlePowerOff = useMemo(\n    () =>\n      debounce(() => {\n        onPowerOff();\n      }, 2000),\n    [onPowerOff]\n  );\n\n  const buttonClass = `phone-off-button ${className}`;\n\n  return (\n    <button\n      {...props}\n      className={buttonClass + (isPoweringOff ? \" powering-off\" : \"\")}\n      onPointerDown={(e) => {\n        e.stopPropagation();\n        handlePowerOff();\n        setIsPoweringOff(true);\n      }}\n      onPointerUp={(e) => {\n        e.stopPropagation();\n        handlePowerOff.cancel();\n        setIsPoweringOff(false);\n      }}\n      onPointerLeave={(e) => {\n        e.stopPropagation();\n        handlePowerOff.cancel();\n        setIsPoweringOff(false);\n      }}\n    >\n      <BiPowerOff size={30} />\n    </button>\n  );\n};\n\nexport default PhoneOffButton;\n","import { Html, useBounds } from \"@react-three/drei\";\nimport { PrimitiveProps, useFrame } from \"@react-three/fiber\";\nimport React, { useEffect, useMemo, useRef } from \"react\";\nimport { Group } from \"three\";\nimport \"./PhoneScreen.scss\";\nimport Iphone from \"../Models/Phone/Iphone\";\nimport pointerEvents from \"../utils/pointerEvents\";\nimport Contact from \"./Contact/Contact\";\nimport RealtimeDate from \"./RealtimeDate/RealtimeDate\";\nimport useOutsideClickListener from \"../hooks/useOutsideClickListener\";\nimport { debounce } from \"lodash\";\nimport NotificationVolume from \"./NotificationVolume/NotificationVolume\";\nimport PhoneOffButton from \"./PhoneOffButton/PhoneOffButton\";\n\nconst phoneVibrate = new Audio(\"sfx/vibrate.m4a\");\nphoneVibrate.volume = 0.5;\nconst DURATION = {\n  PHONE_VIBRATE_INTERVAL: 60 * 1000,\n  SCREEN_ON: 180 * 1000,\n  SCREEN_OFF: 5 * 1000,\n};\n\nconst timerId: NodeJS.Timeout[] = [];\n\nexport default function PhoneScreen(props: Omit<PrimitiveProps, \"object\">) {\n  const [phoneNotificationIds, setPhoneNotificationId] = React.useState<\n    NodeJS.Timeout[]\n  >([]);\n  const [isVibrating, setIsVibrating] = React.useState(false);\n  const [isScreenOn, setIsScreenOn] = React.useState(false);\n  const phoneRef = useRef<Group | null>(null);\n  const htmlRef = useRef<HTMLDivElement | null>(null);\n  const boundsApi = useBounds();\n\n  const screenOffDebounce = useMemo(\n    () =>\n      debounce(\n        () => {\n          setIsScreenOn(false);\n        },\n        DURATION.SCREEN_OFF,\n        {\n          trailing: true,\n          maxWait: DURATION.SCREEN_OFF,\n        }\n      ),\n    []\n  );\n\n  useOutsideClickListener(htmlRef, () => {\n    screenOffDebounce();\n  });\n\n  const stopVibrating = (e?: React.MouseEvent) => {\n    e?.stopPropagation();\n    phoneVibrate.pause();\n    setIsVibrating(false);\n    phoneNotificationIds.forEach((id) => clearInterval(id));\n    timerId.forEach((id) => clearInterval(id));\n    setPhoneNotificationId([]);\n    screenOffDebounce.cancel();\n  };\n\n  const enableVibrating = (e?: React.MouseEvent) => {\n    e?.stopPropagation();\n    const id = setInterval(() => {\n      setIsVibrating(true);\n      phoneVibrate.play();\n      phoneVibrate.onended = () => {\n        setIsVibrating(false);\n      };\n    }, DURATION.PHONE_VIBRATE_INTERVAL);\n    timerId.push(id);\n    setPhoneNotificationId([...phoneNotificationIds, id]);\n    screenOffDebounce.cancel();\n    return id;\n  };\n\n  useFrame(({ clock }) => {\n    if (phoneRef.current && isVibrating && !!phoneNotificationIds) {\n      phoneRef.current.position.x +=\n        Math.sin(clock.getElapsedTime() * 1000) * 0.003;\n      phoneRef.current.position.z +=\n        Math.sin(clock.getElapsedTime() * 1000) * 0.003;\n      phoneRef.current.rotation.y +=\n        Math.sin(clock.getElapsedTime() * 1000) * 0.002;\n    }\n  });\n\n  // Add notification every 30 seconds\n  // if user hasn't interacted with the phone\n  useEffect(() => {\n    enableVibrating();\n    return () => {\n      timerId.forEach((id) => clearInterval(id));\n      timerId.splice(0, timerId.length);\n      phoneNotificationIds.forEach((id) => clearInterval(id));\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (isScreenOn) {\n      if (phoneRef.current) {\n        boundsApi.refresh(phoneRef.current).clip().fit();\n      }\n    } else {\n      boundsApi.refresh().fit();\n    }\n  }, [isScreenOn, boundsApi]);\n\n  return (\n    <>\n      <group\n        position={[2, -1, 0.95]}\n        rotation={[-Math.PI / 2, 0, -Math.PI / 12]}\n        scale={0.45}\n        ref={phoneRef}\n        {...props}\n        {...pointerEvents}\n        onClick={(e) => {\n          e.stopPropagation();\n          setIsScreenOn(true);\n          setTimeout(() => {\n            setIsScreenOn(false);\n          }, DURATION.SCREEN_ON);\n        }}\n      >\n        <Iphone castShadow receiveShadow />\n\n        {isScreenOn && (\n          <Html\n            wrapperClass=\"iphone-wrapper\"\n            occlude={\"blending\"}\n            transform\n            zIndexRange={[100, 0]}\n            position={[0.165, 1.33, 0.082]}\n            rotation={[0, 0, 0]}\n            distanceFactor={3.3}\n            scale={0.5}\n            ref={htmlRef}\n          >\n            <div className=\"iPhone\" onClick={stopVibrating}>\n              <PhoneOffButton\n                className=\"phone-off\"\n                onPowerOff={() => setIsScreenOn(false)}\n              />\n              <NotificationVolume\n                phoneNotificationIds={phoneNotificationIds}\n                onVolumeOff={enableVibrating}\n                onVolumeHigh={stopVibrating}\n              />\n              <RealtimeDate />\n\n              <Contact />\n            </div>\n          </Html>\n        )}\n      </group>\n    </>\n  );\n}\n"],"names":["Contact","mailTo","mail","linkedinStyle","githubStyle","gmailStyle","iconProps","jsxs","jsx","FaLinkedin","FaSquareGithub","BiLogoGmail","RealtimeDate","time","setTime","React","timer","timeDisplay","getLang","dateDisplay","NotificationVolume","phoneNotificationIds","enableVibrating","stopVibrating","IoIosVolumeOff","IoIosVolumeHigh","PhoneOffButton","onPowerOff","className","props","isPoweringOff","setIsPoweringOff","useState","handlePowerOff","useMemo","debounce","buttonClass","e","BiPowerOff","phoneVibrate","DURATION","timerId","PhoneScreen","setPhoneNotificationId","isVibrating","setIsVibrating","isScreenOn","setIsScreenOn","phoneRef","useRef","htmlRef","boundsApi","useBounds","screenOffDebounce","useOutsideClickListener","id","useFrame","clock","useEffect","Fragment","pointerEvents","Iphone","Html"],"mappings":"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"}